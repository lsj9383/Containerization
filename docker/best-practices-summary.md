# 最佳实践总结

## 减少镜像的尺寸

常用手段：

- 减少镜像层数。
- 多阶段构建。

## 机密信息不能通过 ARG 进行传递

通过 ARG 进行传递参数并在 RUN 中使用参数时，会记录在 history 中，并可以通过 `docker history ${image}` 查看到。

如果需要传递机密信息，则不能通过 ARG 参数，而是通过 BuildKit 结合 `--secret` 方式。

## 如果镜像写磁盘，则一定要声明 VOLUME

## 一定要声明进程的停止信号

## 单一职责
