# 资源配额

当多个用户或团队共享具有固定节点数目的集群时，人们会担心有人使用超过其基于公平原则所分配到的资源量。

资源配额是帮助管理员解决这一问题的工具。

资源配额，通过 ResourceQuota 对象来定义，对每个**命名空间的资源消耗总量**提供限制（LimitRanger 是对命名空间中每个负载申请的资源做限制）。

它可以限制命名空间中某种类型的对象的总数目上限，也可以限制命名空间中的 Pod 可以使用的计算资源的总上限。

资源配额的工作方式如下：

- 不同的团队可以在不同的命名空间下工作。这可以通过 RBAC 强制执行。
- 集群管理员可以为每个命名空间创建一个或多个 ResourceQuota 对象。
- 当用户在命名空间下创建资源（如 Pod、Service 等）时，Kubernetes 的配额系统会跟踪集群的资源使用情况，以确保使用的资源用量不超过 ResourceQuota 中定义的硬性资源限额。
- 如果**资源创建或者更新请求**违反了配额约束，那么该请求会报错（HTTP 403 FORBIDDEN），并在消息中给出有可能违反的约束。

如果命名空间下的计算资源 （如 cpu 和 memory）的配额被启用，则用户**必须为这些资源设定请求值（request）和约束值（limit）**，否则配额系统将拒绝 Pod 的创建。

**提示:**

- 可使用 LimitRanger 准入控制器来为没有设置计算资源需求的 Pod 设置默认值。
